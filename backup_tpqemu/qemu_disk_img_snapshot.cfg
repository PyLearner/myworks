- qemu_disk_img_snapshot:
    type = qemu_disk_img_snapshot
    start_vm = no
    snapshot_image = /home/overlay
    base_file = ""
    remote_host = localhost

    variants:
        - protocol_ssh:
            subcommand = create_ssh
            file_driver = ssh
            file_host = localhost
            file_host_key_check = no
            yum_cmd = "yum install -y sshpass"
            create_ssh_key_cmd = "ssh-keygen -t rsa -q -N '' -f /root/.ssh/id_rsa"
            copy_pub_key_cmd = "sshpass -p ${host_passwordd}"
            copy_pub_key_cmd += " scp /root/.ssh/id_rsa.pub root@:${remote_host}/root/.ssh/authorized_keys"
            create_snapshot_cmd = "qemu-img create -f qcow2 ${snapshot_image} -b "
            create_snapshot_cmd += " ${file_driver}://${base_file}"

        - protocol_https:
            subcommand = create_https
            file_driver = https
            file_sslverify = off
            file_readahead = 64k
            create_snapshot_cmd = "qemu-img create -f qcow2 ${snapshot_image} -b "
            create_snapshot_cmd += " $file_driver://${remote_host}/${base_file}"
            http_conf_cmd = "sed -i 's#/var/www/html#/home/kvm_autotest_root/images#g' /etc/httpd/conf/httpd.conf"
            RHEL.6:
                httpd_start_cmd = "service httpd restart"
                httpd_status_cmd = "service httpd status"
                httpd_status_re = "is running"
            RHEL.7:
                httpd_start_cmd = "systemctl httpd restart"
                httpd_status_cmd = "systemctl httpd status"
                httpd_status_re = "Active: active (running)"
